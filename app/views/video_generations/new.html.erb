<%= render 'layouts/header' %>

<div class="container mx-auto px-4 py-8 max-w-2xl">
  <h1 class="text-3xl font-bold mb-6">動画プロジェクト作成</h1>
  
  <!-- 選択された録音 -->
  <div class="card bg-base-100 shadow-xl mb-6">
    <div class="card-body">
      <h2 class="card-title">選択された録音</h2>
      <p class="text-lg"><%= @recording.title %></p>
      
      <% if @recording.generated_audio.attached? %>
        <div class="mt-3">
          <audio controls class="w-full">
            <source src="<%= rails_blob_path(@recording.generated_audio) %>" type="audio/mpeg">
          </audio>
        </div>
      <% end %>
    </div>
  </div>
  
  <!-- フォーム -->
  <%= form_with model: @video_generation, class: "space-y-6" do |f| %>
    <%= f.hidden_field :recording_id, value: @recording.id %>
    
    <!-- タイトル -->
    <div class="form-control">
      <%= f.label :title, "動画タイトル", class: "label" %>
      <%= f.text_field :title, 
                       class: "input input-bordered w-full", 
                       placeholder: "例: 私の歌ってみた動画",
                       required: true %>
    </div>
    
    <!-- 説明（任意） -->
    <div class="form-control">
      <%= f.label :body, "動画の説明（任意）", class: "label" %>
      <%= f.text_area :body, 
                      class: "textarea textarea-bordered w-full", 
                      rows: 4, 
                      placeholder: "この動画について説明を書いてください..." %>
      <label class="label">
        <span class="label-text-alt text-gray-500">
          YouTubeにアップロードする際、この説明が動画の概要欄に表示されます
        </span>
      </label>
    </div>
    
    <!-- ボタン -->
    <div class="flex gap-4">
      <%= f.submit "プロジェクト作成", class: "btn btn-primary" %>
      <%= link_to "キャンセル", video_generations_path, class: "btn btn-ghost" %>
    </div>
  <% end %>
</div>